{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="stylesheet" href="{ % static 'css/bootstrap.min.css' %}"> -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"> 
    <link rel="stylesheet" href="{ % static 'css/Custom/Pdf.css' %}">
    <title>Health report</title>
    <style>
        
    </style>
</head>

<body>
    <div id="content" class="ps-5 pt-5">
        <h1 class="">Medical Record</h1>
        <hr>
        <p class=" fs-3 m-0 mt-5"><span class = " fw-bold ">Name:</span> {{Name}}</p>
        <p class=" fs-3 m-0"><span class = " fw-bold ">DOB:</span>{{DateOfBirth}}</p>
        <p class=" fs-3 m-0"><span class = " fw-bold ">Gender:</span> {{Gender}}</p>
        <p class=" fs-3 m-0"><span class = " fw-bold ">Age:</span>{{Age}}</p>
        <p class=" fs-3 m-0"><span class = " fw-bold ">Phone no:</span>{{PhoneNumber}}</p>
        <p class=" fs-3 m-0"><span class = " fw-bold ">Report Date:</span>{{ReportDate}}</p>
        <p class=" fs-3 m-0 mb-5"><span class = " fw-bold ">Doctor name:</span>{{DoctorName}}</p>
        <hr>
        <h4 class="mt-3 fw-bold">Sympotoms:</h4>
        <p class=" fs-3 m-0 ms-5">{{Symptoms}}</p>
        <h4 class="mt-3 fw-bold">Diagnosis:</h4>
        <p class=" fs-3 m-0 ms-5">{{Diagnosis}}</p>
        <h4 class="mt-3 fw-bold">Tests Conducted:</h4>
        <p class=" fs-3 m-0 ms-5">{{TestsConducted}}</p>
        <h4 class="mt-3 fw-bold">Treatment plan:</h4>
        <p class=" fs-3 m-0 ms-5">{{TreatmentPlan}}</p>
        <hr>
        <p class=" fs-3 mt-5"><span>Additional notes:</span>{{AdditionalNotes}}</p>
    </div>

    <button id="downloadBtn" class="btn btn-primary mb-5">Download as PDF</button>
    <a href="{% url 'profile' %}">
        <button id="downloadBtn" class="btn btn-outline-dark mb-5 px-5">Back</button>
    </a>

    <!-- jsPDF and html2canvas libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <script>
        document.getElementById('downloadBtn').addEventListener('click', async () => {
        const { jsPDF } = window.jspdf; // Access jsPDF
        const content = document.getElementById('content'); // Get the content element

        // Convert the content to a canvas using html2canvas
        const canvas = await html2canvas(content, {
            scale: 2
        });
        const imgData = canvas.toDataURL('image/png');

        // Create a new jsPDF instance
        const pdf = new jsPDF('p', 'mm', 'a4');
        const pdfWidth = pdf.internal.pageSize.getWidth();
        const pdfHeight = (canvas.height * pdfWidth) / canvas.width;

        const fontSize = 16; // Adjust font size as needed
        pdf.setFontSize(fontSize);
        pdf.text('Custom Header Text', 10, 10);

        // Add the image to the PDF
        pdf.addImage(imgData, 'PNG', 0, 0, pdfWidth, pdfHeight);

        // Save the PDF
        pdf.save('SHM_Report.pdf');
});

    </script>
</body>

</html>